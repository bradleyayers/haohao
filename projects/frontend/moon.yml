fileGroups:
  frontend:
    - "src/**/*"
    - "static/**/*"
    - ".*"
    - "*.*"

tasks:
  build:
    command:
      - vite
      - build
    platform: node
  preview:
    command:
      - vite
      - preview
    deps:
      - ~:build
    local: true
    platform: node
  dev:
    command:
      - vite
      - dev
    local: true
    platform: node
  storybook-build:
    inputs:
      - "@group(frontend)"
  generate:
    command:
      - "drizzle-kit"
      - "generate:pg"
    local: true
    platform: node
  migrate:
    command:
      - "node"
      - "./src/bin/migrate.ts"
    options:
      cache: false
      envFile: .env.local
    local: true
    platform: node
    env:
      NODE_OPTIONS: "--no-warnings=ExperimentalWarning --loader=ts-node/esm"
  vercel:
    command:
      - vercel
    local: true
    platform: node

tags:
  - chromatic
  - eslint
  - sveltekit
